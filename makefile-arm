BUILDROOT_HOME := /home/osboxes/buildroot

CXX:=$(BUILDROOT_HOME)/output/host/usr/bin/arm-linux-g++
CXXFLAGS=--sysroot=$(BUILDROOT_HOME)/output/staging
LFLAGS=
LIBS=-lcurlpp -lcurl -uClibc -lc

SRCDIR := src
INCDIR := inc
BUILDDIR := armobj

SRCEXT := cpp
OBJEXT := o

INC := -I$(INCDIR)

SRC := $(shell find $(SRCDIR) -type f -name *.$(SRCEXT))
OBJ := $(patsubst $(SRCDIR)/%,$(BUILDDIR)/%,$(SRC:.$(SRCEXT)=.$(OBJEXT)))

MAIN=thermo

RM=rm -rf

$(BUILDDIR)/%.$(OBJEXT): $(SRCDIR)/%.$(SRCEXT)
	@mkdir -p $(dir $@)
	$(CXX) $(CXXFLAGS) $(INC) -c -o $@ $<

$(MAIN): $(OBJ)
	$(CXX) -o $(MAIN) $^ $(LIBS)
	scp -P 2222 $(MAIN) user@localhost:~/
